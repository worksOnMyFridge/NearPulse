# ๐ง WebApp Fixes - HOT Timer & Transactions

## ะัะพะฑะปะตะผั ะบะพัะพััะต ะฑัะปะธ ะธัะฟัะฐะฒะปะตะฝั

### 1. โฑ๏ธ HOT Claim Timer ะฝะต ัะฐะฑะพัะฐะป
**ะัะพะฑะปะตะผะฐ:** 
- ะขะฐะนะผะตั ะฟะพะบะฐะทัะฒะฐะป "ะััะฐะปะพัั ะฒัะตะผะตะฝะธ" ะฝะพ ะฑะตะท ะฒัะตะผะตะฝะธ
- ะคัะฝะบัะธั `getHotClaimStatus` ะฒะพะทะฒัะฐัะฐะปะฐ ะฝะตะฟัะฐะฒะธะปัะฝัะน ัะพัะผะฐั ะดะฐะฝะฝัั

**ะะตัะตะฝะธะต:**
ะะฑะฝะพะฒะปะตะฝ ัะฐะนะป `src/services/nearService.js`, ััะฝะบัะธั `getHotClaimStatus`:

```javascript
// ะะซะะ:
return { readyToClaim: true, hoursUntilClaim: 0, minutesUntilClaim: 0 };

// ะกะขะะะ:
return {
  canClaim,              // boolean
  nextClaimTime,         // timestamp ะฒ ะผะธะปะปะธัะตะบัะฝะดะฐั
  lastClaimTime,         // timestamp ะฒ ะผะธะปะปะธัะตะบัะฝะดะฐั
  timeUntilClaim,        // ัััะพะบะฐ "X ั Y ะผะธะฝ"
  hoursUntilClaim,       // ัะธัะปะพ
  minutesUntilClaim,     // ัะธัะปะพ
};
```

**ะะตะทัะปััะฐั:**
- โ ะขะฐะนะผะตั ะฟะพะบะฐะทัะฒะฐะตั "Xั Xะผ Xั" ะฒ ัะตะฐะปัะฝะพะผ ะฒัะตะผะตะฝะธ
- โ ะะฑะฝะพะฒะปัะตััั ะบะฐะถะดัั ัะตะบัะฝะดั
- โ ะะพะบะฐะทัะฒะฐะตั "ะะพะถะฝะพ ะบะปะตะนะผะธัั! ๐" ะบะพะณะดะฐ ะณะพัะพะฒ
- โ ะะตะปะตะฝะฐั ะฟะพะดัะฒะตัะบะฐ ะฟัะธ ะดะพัััะฟะฝะพััะธ ะบะปะตะนะผะฐ

---

### 2. ๐ ะขัะฐะฝะทะฐะบัะธะธ ะฝัะถะฝะพ ะฑัะปะพ ัะปัััะธัั

#### ะัะพะฑะปะตะผะฐ 2.1: Timestamp ะฒ ะฝะตะฟัะฐะฒะธะปัะฝะพะผ ัะพัะผะฐัะต
**ะัะพะฑะปะตะผะฐ:** 
- NEAR ะธัะฟะพะปัะทัะตั ะฝะฐะฝะพัะตะบัะฝะดั (19 ัะธัั)
- Frontend ะพะถะธะดะฐะตั ะผะธะปะปะธัะตะบัะฝะดั
- ะะตะทัะปััะฐั: "Invalid Date" ะธะปะธ ะฝะตะฟัะฐะฒะธะปัะฝะพะต ะฒัะตะผั

**ะะตัะตะฝะธะต:**
ะะพะฑะฐะฒะปะตะฝะฐ ะบะพะฝะฒะตััะฐัะธั ะฒ `src/api.js`:

```javascript
// ะะพะฝะฒะตััะธััะตะผ timestamp ะธะท ะฝะฐะฝะพัะตะบัะฝะด ะฒ ะผะธะปะปะธัะตะบัะฝะดั
const timestampRaw = parseInt(txGroup.timestamp);
const timestampMs = timestampRaw > 1e15 ? Math.floor(timestampRaw / 1e6) : timestampRaw;
```

**ะะตะทัะปััะฐั:**
- โ ะัะตะผั ะพัะพะฑัะฐะถะฐะตััั ะบะพััะตะบัะฝะพ ("ะผะตััั ะฝะฐะทะฐะด" ะฒะผะตััะพ "Invalid Date")

---

#### ะัะพะฑะปะตะผะฐ 2.2: ะะปะธะฝะฝัะต ะฐะดัะตัะฐ ะฒ ะพะฟะธัะฐะฝะธัั
**ะัะพะฑะปะตะผะฐ:** 
- ะะฟะธัะฐะฝะธะต "ะัะฟัะฐะฒะปะตะฝะพ โ 0x1234567890abcdef..." ะทะฐะฝะธะผะฐะปะพ ะผะฝะพะณะพ ะผะตััะฐ

**ะะตัะตะฝะธะต:**
ะะพะฑะฐะฒะปะตะฝะพ ัะพะบัะฐัะตะฝะธะต ะฐะดัะตัะพะฒ ะฒ `src/api.js`:

```javascript
// ะฃะบะพัะฐัะธะฒะฐะตะผ ะดะปะธะฝะฝัะต ะฐะดัะตัะฐ
const shortParty = otherParty.length > 20 
  ? otherParty.substring(0, 8) + '...' + otherParty.substring(otherParty.length - 6)
  : otherParty;
```

**ะะตะทัะปััะฐั:**
- โ "ะัะฟัะฐะฒะปะตะฝะพ โ wrap.near" (ะบะพัะพัะบะธะต ะฐะดัะตัะฐ)
- โ "ะัะฟัะฐะฒะปะตะฝะพ โ 0x123456...abc123" (ะดะปะธะฝะฝัะต ะฐะดัะตัะฐ)

---

#### ะัะพะฑะปะตะผะฐ 2.3: ะะตะฟะพะฝััะฝัะต ะพะฟะธัะฐะฝะธั ัะพะบะตะฝ ััะฐะฝััะตัะพะฒ
**ะัะพะฑะปะตะผะฐ:** 
- "ะะพะปััะตะฝะพ 0XSHITZU" - ะฝะตะธะฝัะพัะผะฐัะธะฒะฝะพ

**ะะตัะตะฝะธะต:**
ะฃะปัััะตะฝั ะพะฟะธัะฐะฝะธั ะฒ `src/api.js`:

```javascript
// ะะซะะ:
description = isOutgoing ? `ะัะฟัะฐะฒะปะตะฝะพ ${tokenName}` : `ะะพะปััะตะฝะพ ${tokenName}`;

// ะกะขะะะ:
description = isOutgoing ? `ะัะฟัะฐะฒะปะตะฝ ัะพะบะตะฝ ${tokenName || 'Token'}` : `ะะพะปััะตะฝ ัะพะบะตะฝ ${tokenName || 'Token'}`;
```

ะขะฐะบะถะต ะธะทะผะตะฝะตะฝะฐ ะธะบะพะฝะบะฐ:
```javascript
icon = '๐ช';  // ะะดะธะฝะฐั ะธะบะพะฝะบะฐ ะดะปั ะฒัะตั ัะพะบะตะฝะพะฒ
```

**ะะตะทัะปััะฐั:**
- โ "ะะพะปััะตะฝ ัะพะบะตะฝ 0XSHITZU" (ะฟะพะฝััะฝะตะต)
- โ ะะบะพะฝะบะฐ ๐ช ะดะปั ะฒัะตั ัะพะบะตะฝะพะฒ (ะฒะผะตััะพ ๐ฅ/๐ค)

---

#### ะัะพะฑะปะตะผะฐ 2.4: ะััััััะฒะธะต ะฒะธะทัะฐะปัะฝะพะน ะณััะฟะฟะธัะพะฒะบะธ
**ะัะพะฑะปะตะผะฐ:** 
- ะัะต ััะฐะฝะทะฐะบัะธะธ ะฒัะณะปัะดะตะปะธ ะพะดะธะฝะฐะบะพะฒะพ
- ะกะปะพะถะฝะพ ัะฐะทะปะธัะธัั ัะธะฟั

**ะะตัะตะฝะธะต:**
ะะพะฑะฐะฒะปะตะฝั ัะฒะตัะฝัะต ะปะตะฒัะต ะณัะฐะฝะธัั ะฒ `webapp/src/components/TransactionsScreen.jsx`:

```javascript
const getBorderColor = (type) => {
  if (type === 'hot_claim') return 'border-l-4 border-l-orange-500';    // ๐ฅ HOT
  if (type === 'claim') return 'border-l-4 border-l-yellow-500';        // ๐ MOON
  if (type === 'swap') return 'border-l-4 border-l-blue-500';           // ๐ Swap
  if (type === 'transfer_in' || type === 'token_in') return 'border-l-4 border-l-green-500';  // ๐ฅ ะัะพะดััะธะต
  if (type === 'transfer_out' || type === 'token_out') return 'border-l-4 border-l-red-500';  // ๐ค ะััะพะดััะธะต
  return 'border-l-4 border-l-gray-300';
};
```

**ะะตะทัะปััะฐั:**
- โ ๐ ะัะฐะฝะถะตะฒะฐั ะณัะฐะฝะธัะฐ ะดะปั HOT claim
- โ ๐ก ะะตะปัะฐั ะณัะฐะฝะธัะฐ ะดะปั MOON claim
- โ ๐ต ะกะธะฝัั ะณัะฐะฝะธัะฐ ะดะปั swap
- โ ๐ข ะะตะปะตะฝะฐั ะณัะฐะฝะธัะฐ ะดะปั ะฒัะพะดััะธั
- โ ๐ด ะัะฐัะฝะฐั ะณัะฐะฝะธัะฐ ะดะปั ะธััะพะดััะธั

---

#### ะัะพะฑะปะตะผะฐ 2.5: ะะพััะดะพะบ ะธะฝัะพัะผะฐัะธะธ
**ะัะพะฑะปะตะผะฐ:** 
- ะขะพะบะตะฝ badge ะฟะพะบะฐะทัะฒะฐะปัั ะฒะฝะธะทั, ะฟะพัะปะต ััะผะผั

**ะะตัะตะฝะธะต:**
ะะทะผะตะฝะตะฝ ะฟะพััะดะพะบ ัะปะตะผะตะฝัะพะฒ:

```
ะะซะะ:                      ะกะขะะะ:
โโโโโโโโโโโโโโโโ          โโโโโโโโโโโโโโโโ
ะะฟะธัะฐะฝะธะต                  ะะฟะธัะฐะฝะธะต
ะัะตะผั + Explorer          [TOKEN_BADGE]      โ ะะตัะตะผะตััะธะปะธ ะฒััะต
ะกัะผะผะฐ NEAR                ะกัะผะผะฐ NEAR
[TOKEN_BADGE]             ะัะตะผั + Explorer
```

**ะะตะทัะปััะฐั:**
- โ ะะพะณะธัะฝัะน ะฟะพััะดะพะบ: ะพะฟะธัะฐะฝะธะต โ ัะพะบะตะฝ โ ััะผะผะฐ โ ะฒัะตะผั

---

## ะคะฐะนะปั ะธะทะผะตะฝะตะฝั

### Backend
1. โ `src/services/nearService.js`
   - ะคัะฝะบัะธั `getHotClaimStatus()` - ะธัะฟัะฐะฒะปะตะฝ ะฒะพะทะฒัะฐัะฐะตะผัะน ัะพัะผะฐั

2. โ `src/api.js`
   - Endpoint `/api/transactions` - ะดะพะฑะฐะฒะปะตะฝะฐ ะบะพะฝะฒะตััะฐัะธั timestamp
   - ะฃะปัััะตะฝั ะพะฟะธัะฐะฝะธั ััะฐะฝะทะฐะบัะธะน
   - ะกะพะบัะฐัะตะฝะธะต ะดะปะธะฝะฝัั ะฐะดัะตัะพะฒ

### Frontend
3. โ `webapp/src/components/TransactionsScreen.jsx`
   - ะะพะฑะฐะฒะปะตะฝั ัะฒะตัะฝัะต ะณัะฐะฝะธัั
   - ะะทะผะตะฝะตะฝ ะฟะพััะดะพะบ ัะปะตะผะตะฝัะพะฒ
   - ะฃะปัััะตะฝะฐ ะฒะตัััะบะฐ

### Deployment
4. โ `fix-webapp.bat` - ัะบัะธะฟั ะดะปั ะฑััััะพะณะพ ะดะตะฟะปะพั ะธัะฟัะฐะฒะปะตะฝะธะน

---

## ะะฐะบ ะทะฐะดะตะฟะปะพะธัั ะธัะฟัะฐะฒะปะตะฝะธั

### ะะฐัะธะฐะฝั 1: ะััััะพ (ัะตะบะพะผะตะฝะดัะตััั)
```bash
fix-webapp.bat
```

### ะะฐัะธะฐะฝั 2: ะัััะฝัั
```bash
git add .
git commit -m "fix: Fix HOT timer and transactions"
git push
```

ะะพะดะพะถะดะธัะต 2-3 ะผะธะฝััั ะฟะพะบะฐ Railway ะธ Vercel ะทะฐะดะตะฟะปะพัั ะธะทะผะตะฝะตะฝะธั.

---

## ะขะตััะธัะพะฒะฐะฝะธะต ะฟะพัะปะต ะดะตะฟะปะพั

### 1. ะัะพะฒะตัััะต HOT ัะฐะนะผะตั
- [ ] ะัะบัะพะนัะต ะณะปะฐะฒะฝัั ัััะฐะฝะธัั
- [ ] ะะฐะนะดะธัะต ะฑะปะพะบ "ะกะปะตะดัััะธะน ะบะปะตะนะผ HOT"
- [ ] ะฃะฑะตะดะธัะตัั ััะพ ะฟะพะบะฐะทัะฒะฐะตััั ะฒัะตะผั (ะฝะฐะฟัะธะผะตั "2ั 30ะผ 15ั")
- [ ] ะะพะดะพะถะดะธัะต ะฝะตัะบะพะปัะบะพ ัะตะบัะฝะด - ัะฐะนะผะตั ะดะพะปะถะตะฝ ะพะฑะฝะพะฒะปััััั

### 2. ะัะพะฒะตัััะต ััะฐะฝะทะฐะบัะธะธ
- [ ] ะัะบัะพะนัะต ะฒะบะปะฐะดะบั "ะขัะฐะฝะทะฐะบัะธะธ"
- [ ] ะัะพะฒะตัััะต ัะฒะตัะฝัะต ะณัะฐะฝะธัั ัะปะตะฒะฐ:
  - ๐ HOT claim
  - ๐ข ะัะพะดััะธะต ะฟะตัะตะฒะพะดั
  - ๐ด ะััะพะดััะธะต ะฟะตัะตะฒะพะดั
  - ๐ต Swap ะพะฟะตัะฐัะธะธ
- [ ] ะัะพะฒะตัััะต ััะพ ะฒัะตะผั ะฟะพะบะฐะทัะฒะฐะตััั ะบะพััะตะบัะฝะพ ("ะผะตััั ะฝะฐะทะฐะด", "15 ะผะธะฝัั ะฝะฐะทะฐะด")
- [ ] ะัะพะฒะตัััะต ััะพ ัะพะบะตะฝ badges ะฟะพะบะฐะทัะฒะฐัััั

### 3. ะัะพะฒะตัััะต ะบะพะฝัะพะปั
- [ ] ะัะบัะพะนัะต DevTools (F12)
- [ ] ะะตัะตะนะดะธัะต ะฝะฐ ะฒะบะปะฐะดะบั Console
- [ ] ะะต ะดะพะปะถะฝะพ ะฑััั ะบัะฐัะฝัั ะพัะธะฑะพะบ
- [ ] ะะต ะดะพะปะถะฝะพ ะฑััั "Invalid Date"

---

## ะะพ ะธ ะะพัะปะต

### HOT Timer

**ะะ:**
```
๐ฅ ะกะปะตะดัััะธะน ะบะปะตะนะผ HOT
   ะััะฐะปะพัั ะฒัะตะผะตะฝะธ
   
   [ะัััะพะต ะผะตััะพ]
```

**ะะะกะะ:**
```
๐ฅ ะกะปะตะดัััะธะน ะบะปะตะนะผ HOT
   ะััะฐะปะพัั ะฒัะตะผะตะฝะธ
   
   โฐ 2ั 30ะผ 15ั  โ ะะฐะฑะพัะฐะตั!
```

---

### ะขัะฐะฝะทะฐะบัะธะธ

**ะะ:**
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ๐ช ะะพะปััะตะฝะพ 0XSHITZU           โ
โ ะผะตััั ะฝะฐะทะฐะด โข Explorer          โ
โ 0XSHITZU                        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

**ะะะกะะ:**
```
โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
๐ข โ ๐ช ะะพะปััะตะฝ ัะพะบะตะฝ 0XSHITZU    โ
โ โ [0XSHITZU]    โ Badge ัะฒะตััั โ
โ โ ะผะตััั ะฝะฐะทะฐะด โข Explorer        โ
โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ะขะตัะฝะธัะตัะบะธะต ะดะตัะฐะปะธ

### Timestamp ะบะพะฝะฒะตััะฐัะธั
NEAR blockchain ะธัะฟะพะปัะทัะตั ะฝะฐะฝะพัะตะบัะฝะดั (19 ัะธัั):
```
1734567890123456789 (ะฝะฐะฝะพัะตะบัะฝะดั)
โ ะดะตะปะธะผ ะฝะฐ 1,000,000
1734567890123 (ะผะธะปะปะธัะตะบัะฝะดั)
โ ะธัะฟะพะปัะทัะตะผ ะฒ JavaScript Date
"ะผะตััั ะฝะฐะทะฐะด"
```

### API Response Format

**GET /api/hot-claim/:address**
```json
{
  "canClaim": false,
  "nextClaimTime": 1734567890123,      // ะผะธะปะปะธัะตะบัะฝะดั
  "lastClaimTime": 1734549890123,      // ะผะธะปะปะธัะตะบัะฝะดั
  "timeUntilClaim": "2 ั 30 ะผะธะฝ",
  "hoursUntilClaim": 2,
  "minutesUntilClaim": 30
}
```

**GET /api/transactions/:address**
```json
{
  "transactions": [
    {
      "hash": "ABC123...",
      "type": "hot_claim",
      "icon": "๐ฅ",
      "description": "Claim HOT",
      "amount": 0.5,
      "timestamp": 1734567890123,      // ะผะธะปะปะธัะตะบัะฝะดั!
      "tokenName": null
    }
  ]
}
```

---

## ะะตะทัะปััะฐั

### โ HOT Timer
- ะะพะบะฐะทัะฒะฐะตั ะฒัะตะผั ะฒ ัะตะฐะปัะฝะพะผ ะฒัะตะผะตะฝะธ
- ะะฑะฝะพะฒะปัะตััั ะบะฐะถะดัั ัะตะบัะฝะดั
- ะะตะปะตะฝะฐั ะฟะพะดัะฒะตัะบะฐ ะบะพะณะดะฐ ะณะพัะพะฒ

### โ ะขัะฐะฝะทะฐะบัะธะธ
- ะฆะฒะตัะฝัะต ะณัะฐะฝะธัั ะดะปั ะฒะธะทัะฐะปัะฝะพะน ะณััะฟะฟะธัะพะฒะบะธ
- ะะพััะตะบัะฝะพะต ะฒัะตะผั ("ะผะตััั ะฝะฐะทะฐะด")
- ะฃะปัััะตะฝะฝัะต ะพะฟะธัะฐะฝะธั
- ะกะพะบัะฐัะตะฝะฝัะต ะฐะดัะตัะฐ
- ะะพะณะธัะฝัะน ะฟะพััะดะพะบ ัะปะตะผะตะฝัะพะฒ

### ๐ WebApp ะฟะพะปะฝะพัััั ะณะพัะพะฒ ะบ ะธัะฟะพะปัะทะพะฒะฐะฝะธั!
