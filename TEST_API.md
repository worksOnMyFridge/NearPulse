# üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º

## –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ src/api.js —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ API
npm run api

# –û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:
# üöÄ NearPulse API –∑–∞–ø—É—â–µ–Ω –Ω–∞ http://localhost:3001
# üì± CORS —Ä–∞–∑—Ä–µ—à—ë–Ω –¥–ª—è: ...
```

–ï—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏–ª—Å—è - ‚úÖ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç!

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ api/index.js —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç app –±–µ–∑ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

```bash
# –í Node.js REPL
node
```

```javascript
// –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º app
const app = require('./api/index.js');

// –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ —ç—Ç–æ Express app
console.log(app.listen); // –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Ñ—É–Ω–∫—Ü–∏—è

// –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –ù–ï –∑–∞–ø—É—Å—Ç–∏–ª—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
// (–Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è "üöÄ NearPulse API –∑–∞–ø—É—â–µ–Ω...")
```

–ï—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –ù–ï –∑–∞–ø—É—Å—Ç–∏–ª—Å—è –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ - ‚úÖ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç!

### 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ endpoints

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ API (–µ—Å–ª–∏ –µ—â—ë –Ω–µ –∑–∞–ø—É—â–µ–Ω)
npm run api
```

**–í –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:**

```bash
# Health check
curl http://localhost:3001/api/health

# –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
# {
#   "status": "ok",
#   "timestamp": 1234567890,
#   "service": "NearPulse API"
# }

# Balance check
curl http://localhost:3001/api/balance/leninjiv23.tg

# –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: JSON —Å –±–∞–ª–∞–Ω—Å–æ–º
```

### 4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å Vercel Dev

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Vercel CLI (–µ—Å–ª–∏ –µ—â—ë –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
npm install -g vercel

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ Vercel dev —Å–µ—Ä–≤–µ—Ä
vercel dev

# –û—Ç–∫—Ä–æ–µ—Ç—Å—è –Ω–∞ http://localhost:3000
```

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ endpoints:**

```bash
# Health
curl http://localhost:3000/api/health

# Balance
curl http://localhost:3000/api/balance/leninjiv23.tg
```

–ï—Å–ª–∏ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç - ‚úÖ –≥–æ—Ç–æ–≤–æ –∫ –¥–µ–ø–ª–æ—é!

---

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### src/api.js - –£—Å–ª–æ–≤–Ω—ã–π –∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```javascript
// –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞ –¢–û–õ–¨–ö–û –µ—Å–ª–∏ —Ñ–∞–π–ª –∑–∞–ø—É—â–µ–Ω –Ω–∞–ø—Ä—è–º—É—é
if (require.main === module) {
  app.listen(PORT, () => {
    console.log('üöÄ API –∑–∞–ø—É—â–µ–Ω');
  });
}

// –≠–∫—Å–ø–æ—Ä—Ç –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –¥—Ä—É–≥–∏—Ö —Ñ–∞–π–ª–∞—Ö
module.exports = app;
```

**–î–≤–∞ —Ä–µ–∂–∏–º–∞ —Ä–∞–±–æ—Ç—ã:**

1. **–õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫:** `npm run api` ‚Üí `node src/api.js`
   - `require.main === module` ‚Üí **true**
   - –°–µ—Ä–≤–µ—Ä **–ó–ê–ü–£–°–ö–ê–ï–¢–°–Ø** –Ω–∞ –ø–æ—Ä—Ç—É 3001
   - ‚úÖ –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

2. **–ò–º–ø–æ—Ä—Ç –≤ Vercel:** `require('./src/api')`
   - `require.main === module` ‚Üí **false**
   - –°–µ—Ä–≤–µ—Ä **–ù–ï –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è**
   - ‚úÖ –¢–æ–ª—å–∫–æ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è app –¥–ª—è Vercel

### api/index.js - Vercel Serverless Function

```javascript
// –ü—Ä–æ—Å—Ç–æ —Ä–µ—ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç app –∏–∑ src/api.js
const app = require('../src/api');
module.exports = app;
```

**–ü–æ—á–µ–º—É —Ç–∞–∫:**
- ‚úÖ –ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞
- ‚úÖ –û–¥–∏–Ω –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã (`src/api.js`)
- ‚úÖ –õ–µ–≥–∫–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º

- [ ] `npm run api` –∑–∞–ø—É—Å–∫–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä –Ω–∞ localhost:3001
- [ ] `curl http://localhost:3001/api/health` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `{"status": "ok"}`
- [ ] `curl http://localhost:3001/api/balance/leninjiv23.tg` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –±–∞–ª–∞–Ω—Å
- [ ] `require('./api/index')` –ù–ï –∑–∞–ø—É—Å–∫–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- [ ] `vercel dev` —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] Frontend –Ω–∞ localhost:5173 –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —Å API

---

## –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### "Port 3001 already in use"
**–†–µ—à–µ–Ω–∏–µ:** –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –¥—Ä—É–≥–æ–π –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞ –ø–æ—Ä—Ç—É 3001:
```bash
# Windows
netstat -ano | findstr :3001
taskkill /PID <PID> /F

# Linux/Mac
lsof -ti:3001 | xargs kill -9
```

### "Module not found"
**–†–µ—à–µ–Ω–∏–µ:** –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
npm install
```

### Vercel dev –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `vercel.json` –∏ `api/index.js`:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
ls api/index.js
ls vercel.json
```

---

## ‚úÖ –ì–æ—Ç–æ–≤–æ!

–ï—Å–ª–∏ –≤—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—à–ª–∏ —É—Å–ø–µ—à–Ω–æ - –º–æ–∂–Ω–æ –¥–µ–ø–ª–æ–∏—Ç—å –Ω–∞ Vercel! üöÄ
